"use strict";!function(){function u(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var d,s={engine:"doT",version:"1.1.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0,log:!0,encodeHTMLSource:function(e){var n={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(t,function(e){return n[e]||e}):""}}};d=function(){return this||(0,eval)("this")}(),"undefined"!=typeof module&&module.exports?module.exports=s:"function"==typeof define&&define.amd?define(function(){return s}):d.doT=s;var p={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},l=/$^/;s.template=function(e,n,t){var r,o,a=(n=n||s.templateSettings).append?p.append:p.split,c=0,i=n.use||n.define?function r(o,e,a){return("string"==typeof e?e:e.toString()).replace(o.define||l,function(e,r,n,t){return 0===r.indexOf("def.")&&(r=r.substring(4)),r in a||(":"===n?(o.defineParams&&t.replace(o.defineParams,function(e,n,t){a[r]={arg:n,text:t}}),r in a||(a[r]=t)):new Function("def","def['"+r+"']="+t)(a)),""}).replace(o.use||l,function(e,n){o.useParams&&(n=n.replace(o.useParams,function(e,n,t,r){if(a[t]&&a[t].arg&&r){var o=(t+":"+r).replace(/'|\\/g,"_");return a.__exp=a.__exp||{},a.__exp[o]=a[t].text.replace(new RegExp("(^|[^\\w$])"+a[t].arg+"([^\\w$])","g"),"$1"+r+"$2"),n+"def.__exp['"+o+"']"}}));var t=new Function("def","return "+n)(a);return t?r(o,t,a):t})}(n,e,t||{}):e;i=("var out='"+(n.strip?i.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):i).replace(/'|\\/g,"\\$&").replace(n.interpolate||l,function(e,n){return a.start+u(n)+a.end}).replace(n.encode||l,function(e,n){return r=!0,a.startencode+u(n)+a.end}).replace(n.conditional||l,function(e,n,t){return n?t?"';}else if("+u(t)+"){out+='":"';}else{out+='":t?"';if("+u(t)+"){out+='":"';}out+='"}).replace(n.iterate||l,function(e,n,t,r){return n?(c+=1,o=r||"i"+c,n=u(n),"';var arr"+c+"="+n+";if(arr"+c+"){var "+t+","+o+"=-1,l"+c+"=arr"+c+".length-1;while("+o+"<l"+c+"){"+t+"=arr"+c+"["+o+"+=1];out+='"):"';} } out+='"}).replace(n.evaluate||l,function(e,n){return"';"+u(n)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),r&&(n.selfcontained||!d||d._encodeHTML||(d._encodeHTML=s.encodeHTMLSource(n.doNotSkipEncoded)),i="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+s.encodeHTMLSource.toString()+"("+(n.doNotSkipEncoded||"")+"));"+i);try{return new Function(n.varname,i)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+i),e}},s.compile=function(e,n){return s.template(e,null,n)}}();
"use strict";function BTime__ago(e,t,r){for(var n=t||"day",o=["minute","hour","day","week","month","year"],u=[1e3,6e4,36e5,864e5,6048e5,2592e6,31104e6],a=["秒前","分钟前","小时前","天前","周前","月前","年前"],i=Date.now()-e,f=0,c=u.length;f<c;f+=1){if(f+1===c||i<=u[f+1]){var m=Math.floor(i/u[f]);return 0===m?"刚刚":m+a[f]}if(n===o[f])return BTime__format(e,r)}}function BTime__format(e,t){var r=new Date(e),n=r.getFullYear(),o=r.getMonth()+1,u=r.getDate(),a=r.getHours(),i=r.getMinutes(),f=r.getSeconds(),c=function(e){return("0"+e).slice(-2)},m={YYYY:n,YY:c(n),MM:c(o),M:o,DD:c(u),D:u,hh:c(a),h:a,mm:c(i),m:i,ss:c(f),s:f};return t.replace(/(Y+)(.?)(M+)(.?)(D+)((.[^h]+)((h+)(.?)(m+)(.?)(s+))?)?/g,function(){return Array.prototype.slice.call(arguments,1,14).filter(function(e){return e&&e.length<5}).map(function(e){return m[e]?m[e]:e}).join("")})}
"use strict";window.initialArticle=function(e){var t={header:window.document.getElementById("articletpl").text},n=doT.template(window.document.getElementById("articletpl").text,void 0,t),i=e;function d(e){return!(!e||"IMG"!==e.tagName.toUpperCase()||!e.src)}i.date=BTime__ago(Date.parse(i.date)||Date.now(),"week","YYYY年M月D日"),window.document.title=i.title||"",window.document.getElementById("article").innerHTML=n(i),window.document.addEventListener("click",function(e){var t=e.target;if(d(t)){var n=t.src,i=Array.prototype.slice.call(window.document.querySelectorAll("img")).map(function(e){return!!d(e)&&e.src}).filter(function(e){return e}),o=i.indexOf(n)||0;window.miui&&window.miui.openAtlasMode&&window.miui.openAtlasMode(o,JSON.stringify(i))}})},window.onload=function(){try{}catch(e){console.error(e)}};

